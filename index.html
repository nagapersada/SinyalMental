<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DV Naga Persada Player</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root {
            --gold: #FFD700;
            --gold-dim: #b8860b;
            --dark: #0f0f0f;
            --glass: rgba(20, 20, 20, 0.85);
            --glass-border: rgba(255, 215, 0, 0.15);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; user-select: none; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--dark);
            color: white;
            height: 100vh;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* --- BACKGROUND DINAMIS --- */
        .bg-layer {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('1000185027.jpg'); /* Pastikan nama file background benar */
            background-size: cover;
            background-position: center;
            filter: blur(8px) brightness(0.4);
            transform: scale(1.1);
            z-index: -1;
        }

        /* --- LAYOUT UTAMA --- */
        #app-container {
            width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* --- SLIDE 1: WELCOME --- */
        #welcome-screen {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 99;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            transition: opacity 0.8s ease;
        }

        .logo-intro { width: 140px; margin-bottom: 20px; animation: float 3s infinite ease-in-out; }
        .btn-start {
            margin-top: 30px;
            padding: 12px 50px;
            border-radius: 50px;
            border: none;
            background: linear-gradient(90deg, var(--gold-dim), var(--gold));
            color: black;
            font-weight: bold;
            font-size: 1.1rem;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }

        /* --- SLIDE 2: PLAYER INTERFACE --- */
        #player-screen {
            display: none;
            width: 100%;
            height: 100%;
            flex-direction: column;
        }

        /* Tampilan Portrait (HP Berdiri) */
        .top-section {
            flex: 1; /* Bagian atas lebih besar */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
        }

        .album-art {
            width: 220px;
            height: 220px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            border: 2px solid var(--glass-border);
            object-fit: cover;
            margin-bottom: 20px;
        }

        .song-info { text-align: center; margin-bottom: 20px; z-index: 2; }
        .song-title { font-size: 1.4rem; font-weight: 700; color: var(--gold); margin-bottom: 5px; text-shadow: 0 2px 4px rgba(0,0,0,0.8); }
        .song-artist { font-size: 0.9rem; color: #ccc; }

        /* Progress Bar */
        .progress-container {
            width: 80%;
            height: 5px;
            background: rgba(255,255,255,0.2);
            border-radius: 5px;
            margin-bottom: 25px;
            cursor: pointer;
            position: relative;
        }
        .progress-fill {
            height: 100%;
            background: var(--gold);
            border-radius: 5px;
            width: 0%;
            transition: width 0.1s linear;
        }

        /* Controls */
        .controls { display: flex; align-items: center; gap: 30px; z-index: 2; }
        .btn-ctrl { background: none; border: none; color: white; font-size: 1.5rem; cursor: pointer; transition: transform 0.2s; }
        .btn-ctrl:active { transform: scale(0.9); }
        .btn-play {
            width: 70px; height: 70px;
            background: var(--gold);
            border-radius: 50%;
            color: black;
            font-size: 2rem;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.4);
        }

        /* Playlist Section */
        .playlist-section {
            height: 40%;
            background: var(--glass);
            backdrop-filter: blur(15px);
            border-top-left-radius: 30px;
            border-top-right-radius: 30px;
            padding: 20px;
            overflow-y: auto;
            border-top: 1px solid var(--glass-border);
        }

        .playlist-header {
            font-size: 1rem;
            color: var(--gold);
            margin-bottom: 15px;
            font-weight: 600;
            display: flex; justify-content: space-between; align-items: center;
        }

        .track-item {
            display: flex;
            align-items: center;
            padding: 12px;
            border-radius: 12px;
            margin-bottom: 8px;
            transition: background 0.3s;
            cursor: pointer;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .track-item.active {
            background: linear-gradient(90deg, rgba(255, 215, 0, 0.2), transparent);
            border-left: 3px solid var(--gold);
        }

        .track-num { width: 30px; font-size: 0.9rem; color: #888; }
        .track-name { flex: 1; font-size: 0.95rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .track-icon { opacity: 0; color: var(--gold); }
        .track-item.active .track-icon { opacity: 1; }

        /* Error Message */
        #error-msg {
            position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
            background: #ff4444; color: white; padding: 10px 20px; border-radius: 20px;
            font-size: 0.8rem; display: none; z-index: 100;
        }

        /* --- RESPONSIVE LANDSCAPE (Mode Layar Miring) --- */
        @media (orientation: landscape) {
            #player-screen {
                flex-direction: row; /* Kiri Kanan */
            }

            .top-section {
                width: 50%; /* Kiri: Player */
                height: 100%;
                padding: 10px;
                justify-content: center;
            }

            .album-art {
                width: 140px; height: 140px; /* Perkecil gambar di landscape */
                margin-bottom: 10px;
            }

            .playlist-section {
                width: 50%; /* Kanan: Playlist */
                height: 100%;
                border-radius: 0;
                border-left: 1px solid var(--glass-border);
                border-top: none;
            }
            
            .song-title { font-size: 1.1rem; }
        }

        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

    </style>
</head>
<body>

    <div class="bg-layer"></div>
    <div id="error-msg">File audio tidak ditemukan! Periksa nama file.</div>

    <div id="app-container">
        <div id="welcome-screen">
            <img src="logo.png" alt="Logo" class="logo-intro">
            <h2 style="color:var(--gold)">TIM DV NAGA PERSADA</h2>
            <p style="color:#ccc; font-size:0.9rem; margin-top:5px;">Music Player App</p>
            <button class="btn-start" onclick="startApp()">PUTAR MUSIK</button>
        </div>

        <div id="player-screen">
            <div class="top-section">
                <img src="1000185022.jpg" class="album-art" alt="Cover">
                
                <div class="song-info">
                    <div class="song-title" id="current-title">Memuat...</div>
                    <div class="song-artist">DV Naga Persada Collection</div>
                </div>

                <div class="progress-container" onclick="seekSong(event)">
                    <div class="progress-fill" id="progress-bar"></div>
                </div>

                <div class="controls">
                    <button class="btn-ctrl" onclick="prevSong()"><i class="fas fa-backward-step"></i></button>
                    <button class="btn-play" onclick="togglePlay()">
                        <i class="fas fa-play" id="play-icon"></i>
                    </button>
                    <button class="btn-ctrl" onclick="nextSong()"><i class="fas fa-forward-step"></i></button>
                </div>
            </div>

            <div class="playlist-section">
                <div class="playlist-header">
                    <span>DAFTAR LAGU</span>
                    <i class="fas fa-music"></i>
                </div>
                <div id="playlist-box">
                    </div>
            </div>
        </div>
    </div>

    <audio id="audio-player"></audio>

    <script>
        // DATA LAGU (Pastikan nama file SAMA PERSIS dengan di folder github)
        // GitHub itu Case Sensitive: "1.mp3" TIDAK SAMA dengan "1.MP3"
        const songs = [
            "1. Bukti Nyata", "2. Dari Ragu menjadi Maju", "3. Zero to Hero",
            "4. Dibawah Satu Komando", "5. Tim DV NP (Remix)", "6. Sang Leader",
            "7. DvNP joss (Remix)", "8. Keluarga Besar", "9. Kemenangan",
            "10. Pejuang Prestasi", "11. Maju Serentak", "12. Menang Asyik",
            "13. Peringkat", "14. Pesta Kemenangan", "15. Pintu Bahagia",
            "16. Satu Hati Satu Misi", "17. V.i.P"
        ];

        let index = 0;
        let isPlaying = false;
        const audio = document.getElementById('audio-player');
        const playIcon = document.getElementById('play-icon');
        const progressBar = document.getElementById('progress-bar');
        const errorMsg = document.getElementById('error-msg');

        // Fungsi Memulai Aplikasi
        function startApp() {
            document.getElementById('welcome-screen').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('welcome-screen').style.display = 'none';
                document.getElementById('player-screen').style.display = 'flex';
                loadSong(0);
            }, 500);
        }

        // Load Lagu
        function loadSong(i) {
            index = i;
            // UPDATE JUDUL
            // Menghapus angka depan (misal "1. Bukti Nyata" jadi "Bukti Nyata")
            let rawTitle = songs[index];
            let cleanTitle = rawTitle.substring(rawTitle.indexOf(" ") + 1); 
            document.getElementById('current-title').innerText = cleanTitle;

            // SET SUMBER AUDIO
            // Asumsi file bernama 1.mp3, 2.mp3 sesuai urutan array
            // PENTING: Folder 'mp3' harus ada
            let fileNumber = index + 1;
            audio.src = `mp3/${fileNumber}.mp3`; 

            renderPlaylist();
            resetUI();
        }

        function togglePlay() {
            if (audio.paused) {
                audio.play().then(() => {
                    isPlaying = true;
                    playIcon.className = "fas fa-pause";
                    updateRowActive();
                }).catch(err => {
                    console.log(err);
                    showError("Browser memblokir autoplay, klik lagi!");
                });
            } else {
                audio.pause();
                isPlaying = false;
                playIcon.className = "fas fa-play";
            }
        }

        function nextSong() {
            index = (index + 1) % songs.length;
            loadSong(index);
            togglePlay();
        }

        function prevSong() {
            index = (index - 1 + songs.length) % songs.length;
            loadSong(index);
            togglePlay();
        }

        // Render Playlist
        function renderPlaylist() {
            const box = document.getElementById('playlist-box');
            box.innerHTML = "";
            songs.forEach((song, i) => {
                let div = document.createElement('div');
                div.className = `track-item ${i === index ? 'active' : ''}`;
                div.onclick = () => { loadSong(i); togglePlay(); };
                
                // Ambil judul bersih
                let cleanTitle = song.substring(song.indexOf(" ") + 1);

                div.innerHTML = `
                    <div class="track-num">${i + 1}</div>
                    <div class="track-name">${cleanTitle}</div>
                    <div class="track-icon"><i class="fas fa-volume-high"></i></div>
                `;
                box.appendChild(div);
            });
        }

        function updateRowActive() {
            let items = document.querySelectorAll('.track-item');
            items.forEach((item, i) => {
                if (i === index) item.classList.add('active');
                else item.classList.remove('active');
            });
        }

        function resetUI() {
            progressBar.style.width = "0%";
            errorMsg.style.display = 'none';
        }

        function showError(msg) {
            errorMsg.innerText = msg;
            errorMsg.style.display = 'block';
            setTimeout(() => errorMsg.style.display = 'none', 3000);
        }

        // Event Listeners
        audio.addEventListener('timeupdate', () => {
            if (audio.duration) {
                const percent = (audio.currentTime / audio.duration) * 100;
                progressBar.style.width = `${percent}%`;
            }
        });

        audio.addEventListener('ended', nextSong);

        // ERROR HANDLING (PENTING UNTUK DIAGNOSA)
        audio.addEventListener('error', (e) => {
            console.error("Error loading audio:", e);
            // Cek kode error
            let msg = "Gagal memuat lagu.";
            if (audio.error.code === 4) msg = `File mp3/${index+1}.mp3 tidak ditemukan!`;
            showError(msg);
            playIcon.className = "fas fa-play";
        });

        // Seek (Geser Durasi)
        function seekSong(e) {
            const width = e.target.closest('.progress-container').clientWidth;
            const clickX = e.offsetX;
            const duration = audio.duration;
            audio.currentTime = (clickX / width) * duration;
        }
    </script>
</body>
</html>
