<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Naga Persada Music</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; margin: 0; padding: 0; }
        body { font-family: 'Poppins', sans-serif; background: #111; color: #fff; height: 100vh; overflow: hidden; display: flex; flex-direction: column; }

        /* Background Fix */
        .bg-fixed {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: url('1000185027.jpg') no-repeat center center/cover;
            filter: blur(8px) brightness(0.4); z-index: -1;
        }

        /* --- HALAMAN DEPAN (INTRO) --- */
        #page-intro {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); z-index: 999;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: opacity 0.6s ease-out;
        }
        
        .intro-btn {
            margin-top: 30px;
            padding: 15px 50px;
            background: linear-gradient(45deg, #FFD700, #DAA520);
            border: none; border-radius: 50px;
            color: #000; font-weight: bold; font-size: 1.2rem;
            cursor: pointer; box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);
            animation: pulse 2s infinite;
        }

        /* --- HALAMAN PLAYER --- */
        #page-player {
            display: none; width: 100%; height: 100%; flex-direction: column;
            opacity: 0; transition: opacity 1s;
        }

        /* Layout untuk Portrait (HP Berdiri) */
        .top-display {
            flex: 1; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            padding: 20px; text-align: center;
        }

        .cover-img {
            width: 200px; height: 200px; border-radius: 20px;
            border: 2px solid #FFD700;
            box-shadow: 0 10px 40px rgba(0,0,0,0.6);
            object-fit: cover; margin-bottom: 20px;
        }

        .song-info h2 { color: #FFD700; font-size: 1.4rem; margin-bottom: 5px; }
        .song-info p { color: #aaa; font-size: 0.9rem; }

        /* Controls */
        .control-area {
            display: flex; align-items: center; gap: 25px; margin-top: 25px;
        }
        .btn-c { background: none; border: none; color: white; font-size: 2rem; cursor: pointer; }
        .btn-main {
            width: 70px; height: 70px; background: #FFD700;
            border-radius: 50%; color: black; font-size: 2rem;
            display: flex; align-items: center; justify-content: center;
        }

        /* Progress Bar */
        .prog-cont { width: 80%; margin-top: 25px; }
        .prog-bg { width: 100%; height: 5px; background: #444; border-radius: 5px; position: relative; }
        .prog-fill { height: 100%; background: #FFD700; width: 0%; border-radius: 5px; }
        .seek-input {
            position: absolute; top: -10px; left: 0; width: 100%; height: 25px;
            opacity: 0; cursor: pointer;
        }

        /* Playlist (Bawah) */
        .playlist-area {
            height: 40%; background: rgba(30,30,30,0.9);
            border-radius: 25px 25px 0 0; border-top: 1px solid #555;
            padding: 10px; overflow-y: auto;
        }
        
        .track {
            display: flex; align-items: center; padding: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.05); cursor: pointer;
        }
        .track.active { color: #FFD700; font-weight: bold; background: rgba(255,215,0,0.1); }
        .t-num { width: 30px; font-size: 0.9rem; }
        .t-title { flex: 1; font-size: 1rem; }

        /* Status Bar (Untuk Cek Error) */
        #status-bar {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: #000; color: #0f0; font-size: 10px;
            padding: 2px 5px; text-align: center; z-index: 9999;
        }

        /* --- LANDSCAPE MODE (HP Miring) --- */
        @media (orientation: landscape) {
            #page-player { flex-direction: row; }
            .top-display { width: 50%; height: 100%; padding: 10px; justify-content: center; }
            .playlist-area { width: 50%; height: 100%; border-radius: 0; border-left: 1px solid #555; }
            .cover-img { width: 120px; height: 120px; margin-bottom: 10px; }
            .song-info h2 { font-size: 1.1rem; }
            .btn-c { font-size: 1.5rem; } .btn-main { width: 50px; height: 50px; font-size: 1.5rem; }
        }

        @keyframes pulse { 0% {transform: scale(1);} 50% {transform: scale(1.05);} 100% {transform: scale(1);} }
    </style>
</head>
<body>

    <div class="bg-fixed"></div>
    
    <audio id="audio-core"></audio>

    <div id="status-bar">Ready to play</div>

    <div id="page-intro">
        <img src="logo.png" style="width:140px; margin-bottom:20px;">
        <h2 style="color:#FFD700">TIM DV NAGA PERSADA</h2>
        <p style="color:#ccc; font-size:0.9rem;">Ketuk tombol untuk memulai musik</p>
        
        <button class="intro-btn" onclick="startApp()">MASUK & PUTAR</button>
    </div>

    <div id="page-player">
        <div class="top-display">
            <img src="1000185022.jpg" class="cover-img">
            <div class="song-info">
                <h2 id="txt-title">Memuat...</h2>
                <p>Naga Persada Collection</p>
            </div>

            <div class="prog-cont">
                <div class="prog-bg">
                    <div class="prog-fill" id="fill-bar"></div>
                    <input type="range" class="seek-input" id="seeker" min="0" max="100" value="0" oninput="seekAudio()">
                </div>
            </div>

            <div class="control-area">
                <button class="btn-c" onclick="changeSong(-1)"><i class="fas fa-step-backward"></i></button>
                <button class="btn-main" onclick="playPause()">
                    <i class="fas fa-play" id="icon-play"></i>
                </button>
                <button class="btn-c" onclick="changeSong(1)"><i class="fas fa-step-forward"></i></button>
            </div>
        </div>

        <div class="playlist-area" id="list-box"></div>
    </div>

    <script>
        // DATA LAGU
        const songTitles = [
            "Bukti Nyata", "Dari Ragu menjadi Maju", "Zero to Hero",
            "Dibawah Satu Komando", "Tim DV NP (Remix)", "Sang Leader",
            "DvNP joss (Remix)", "Keluarga Besar", "Kemenangan",
            "Pejuang Prestasi", "Maju Serentak", "Menang Asyik",
            "Peringkat", "Pesta Kemenangan", "Pintu Bahagia",
            "Satu Hati Satu Misi", "V.i.P"
        ];

        let currentIndex = 0;
        const audio = document.getElementById('audio-core');
        const statusBar = document.getElementById('status-bar');
        const playIcon = document.getElementById('icon-play');
        const fillBar = document.getElementById('fill-bar');
        
        // --- FUNGSI UTAMA ---

        // 1. Dijalankan saat tombol MASUK ditekan
        function startApp() {
            // Animasi Transisi
            document.getElementById('page-intro').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('page-intro').style.display = 'none';
                document.getElementById('page-player').style.display = 'flex';
                setTimeout(() => document.getElementById('page-player').style.opacity = '1', 100);
            }, 600);

            // LANGSUNG LOAD & PLAY LAGU PERTAMA
            // Ini trik agar browser tidak memblokir suara
            loadAndPlay(0);
        }

        // 2. Load Lagu & Play
        function loadAndPlay(index) {
            // Pastikan index tidak minus atau kelebihan
            if (index < 0) index = songTitles.length - 1;
            if (index >= songTitles.length) index = 0;
            
            currentIndex = index;

            // Ganti Teks Judul
            document.getElementById('txt-title').innerText = songTitles[currentIndex];

            // SET SOURCE FILE (Format folder mp3)
            // Menggunakan relative path './mp3/' agar aman
            let fileNumber = currentIndex + 1;
            let sourcePath = `./mp3/${fileNumber}.mp3`;
            
            statusBar.innerText = "Memuat: " + sourcePath;
            audio.src = sourcePath;
            
            // Perintah Play
            audio.play()
                .then(() => {
                    statusBar.innerText = "Status: Playing âœ…";
                    statusBar.style.color = "#0f0";
                    playIcon.className = "fas fa-pause";
                    renderPlaylist();
                })
                .catch(err => {
                    statusBar.innerText = "Blokir/Error: Klik tombol Play manual";
                    statusBar.style.color = "orange";
                    console.log(err);
                });
        }

        // 3. Tombol Play/Pause
        function playPause() {
            if (audio.paused) {
                audio.play();
                playIcon.className = "fas fa-pause";
                statusBar.innerText = "Status: Playing";
            } else {
                audio.pause();
                playIcon.className = "fas fa-play";
                statusBar.innerText = "Status: Paused";
            }
        }

        // 4. Ganti Lagu (Next/Prev)
        function changeSong(direction) {
            loadAndPlay(currentIndex + direction);
        }

        // 5. Render Daftar Lagu
        function renderPlaylist() {
            const box = document.getElementById('list-box');
            box.innerHTML = "";
            songTitles.forEach((title, i) => {
                let div = document.createElement('div');
                div.className = `track ${i === currentIndex ? 'active' : ''}`;
                div.onclick = () => loadAndPlay(i);
                div.innerHTML = `
                    <div class="t-num">${i+1}</div>
                    <div class="t-title">${title}</div>
                    ${i === currentIndex ? '<i class="fas fa-volume-up" style="color:#FFD700"></i>' : ''}
                `;
                box.appendChild(div);
            });
        }

        // --- EVENT LISTENER & ERROR HANDLING ---

        // Update Progress Bar
        audio.addEventListener('timeupdate', () => {
            if(audio.duration) {
                let pct = (audio.currentTime / audio.duration) * 100;
                fillBar.style.width = pct + "%";
                document.getElementById('seeker').value = pct;
            }
        });

        // Auto Next saat habis
        audio.addEventListener('ended', () => changeSong(1));

        // DETEKSI ERROR FILE (PENTING!)
        audio.addEventListener('error', (e) => {
            let code = audio.error.code;
            let path = audio.src;
            // Ambil nama file saja dari path panjang
            let fileName = path.split('/').pop(); 
            
            if (code === 4) {
                statusBar.innerText = `ERROR 404: File '${fileName}' tidak ditemukan di folder mp3!`;
                statusBar.style.color = "red";
                alert(`GAGAL MEMUTAR!\n\nFile audio '${fileName}' tidak ditemukan.\nPastikan Anda sudah membuat folder bernama 'mp3' dan mengisi file '${fileName}' di dalamnya.`);
            } else {
                statusBar.innerText = "Error Code: " + code;
            }
            playIcon.className = "fas fa-play";
        });

        // Fitur Geser Lagu
        function seekAudio() {
            let val = document.getElementById('seeker').value;
            audio.currentTime = (val / 100) * audio.duration;
        }

        // Render awal playlist
        renderPlaylist();

    </script>
</body>
</html>
