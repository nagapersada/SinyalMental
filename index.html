<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DV Naga Persada Player</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root {
            --gold: #FFD700;
            --gold-dim: #b8860b;
            --dark: #0f0f0f;
            --glass: rgba(20, 20, 20, 0.85);
            --glass-border: rgba(255, 215, 0, 0.15);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; user-select: none; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--dark);
            color: white;
            height: 100vh;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* --- BACKGROUND DINAMIS --- */
        .bg-layer {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('1000185027.jpg'); 
            background-size: cover;
            background-position: center;
            filter: blur(8px) brightness(0.4);
            transform: scale(1.1);
            z-index: -1;
        }

        /* --- LAYOUT UTAMA --- */
        #app-container {
            width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* --- SLIDE 1: WELCOME --- */
        #welcome-screen {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); /* Sedikit lebih gelap agar fokus */
            z-index: 99;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            transition: opacity 0.8s ease;
        }

        .logo-intro { width: 140px; margin-bottom: 20px; animation: float 3s infinite ease-in-out; }
        .btn-start {
            margin-top: 30px;
            padding: 15px 60px; /* Tombol lebih besar */
            border-radius: 50px;
            border: none;
            background: linear-gradient(90deg, var(--gold-dim), var(--gold));
            color: black;
            font-weight: bold;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: 0 0 25px rgba(255, 215, 0, 0.4);
            animation: pulse-btn 2s infinite;
        }

        /* --- SLIDE 2: PLAYER INTERFACE --- */
        #player-screen {
            display: none; /* Hidden by default */
            width: 100%;
            height: 100%;
            flex-direction: column;
            opacity: 0;
            transition: opacity 1s ease;
        }

        /* Tampilan Portrait (HP Berdiri) */
        .top-section {
            flex: 1; 
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
        }

        .album-art {
            width: 220px;
            height: 220px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            border: 2px solid var(--glass-border);
            object-fit: cover;
            margin-bottom: 20px;
        }

        .song-info { text-align: center; margin-bottom: 20px; z-index: 2; }
        .song-title { font-size: 1.4rem; font-weight: 700; color: var(--gold); margin-bottom: 5px; text-shadow: 0 2px 4px rgba(0,0,0,0.8); }
        .song-artist { font-size: 0.9rem; color: #ccc; }

        /* Progress Bar */
        .progress-container {
            width: 80%;
            height: 5px;
            background: rgba(255,255,255,0.2);
            border-radius: 5px;
            margin-bottom: 25px;
            cursor: pointer;
            position: relative;
            padding: 10px 0; /* Area sentuh lebih besar */
            background-clip: content-box;
        }
        .progress-fill {
            height: 5px;
            background: var(--gold);
            border-radius: 5px;
            width: 0%;
            position: relative;
            top: 0;
        }

        /* Controls */
        .controls { display: flex; align-items: center; gap: 30px; z-index: 2; }
        .btn-ctrl { background: none; border: none; color: white; font-size: 1.8rem; cursor: pointer; transition: transform 0.2s; }
        .btn-ctrl:active { transform: scale(0.9); }
        .btn-play {
            width: 75px; height: 75px;
            background: var(--gold);
            border-radius: 50%;
            color: black;
            font-size: 2.2rem;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.4);
        }

        /* Playlist Section */
        .playlist-section {
            height: 40%;
            background: var(--glass);
            backdrop-filter: blur(15px);
            border-top-left-radius: 30px;
            border-top-right-radius: 30px;
            padding: 20px;
            overflow-y: auto;
            border-top: 1px solid var(--glass-border);
        }

        .playlist-header {
            font-size: 1rem;
            color: var(--gold);
            margin-bottom: 15px;
            font-weight: 600;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 10px;
        }

        .track-item {
            display: flex;
            align-items: center;
            padding: 15px 10px;
            border-radius: 12px;
            margin-bottom: 5px;
            transition: background 0.2s;
            cursor: pointer;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .track-item.active {
            background: linear-gradient(90deg, rgba(255, 215, 0, 0.15), transparent);
            border-left: 3px solid var(--gold);
        }

        .track-num { width: 35px; font-size: 1rem; color: #888; font-weight: bold; }
        .track-name { flex: 1; font-size: 1rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .track-icon { opacity: 0; color: var(--gold); font-size: 0.9rem; }
        .track-item.active .track-icon { opacity: 1; animation: bounce 1s infinite; }

        /* --- RESPONSIVE LANDSCAPE --- */
        @media (orientation: landscape) {
            #player-screen { flex-direction: row; }
            .top-section { width: 50%; height: 100%; padding: 10px; justify-content: center; }
            .album-art { width: 130px; height: 130px; margin-bottom: 10px; }
            .song-title { font-size: 1.2rem; }
            .playlist-section { width: 50%; height: 100%; border-radius: 0; border-left: 1px solid var(--glass-border); border-top: none; }
        }

        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes pulse-btn { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-3px); } }

    </style>
</head>
<body>

    <div class="bg-layer"></div>
    <audio id="audio-player" preload="auto"></audio>

    <div id="app-container">
        <div id="welcome-screen">
            <img src="logo.png" alt="Logo" class="logo-intro">
            <h2 style="color:var(--gold); margin-bottom:5px;">TIM DV NAGA PERSADA</h2>
            <p style="color:#aaa; font-size:0.9rem;">Ketuk tombol untuk memulai</p>
            <button class="btn-start" onclick="unlockAudioAndStart()">PUTAR MUSIK</button>
        </div>

        <div id="player-screen">
            <div class="top-section">
                <img src="1000185022.jpg" class="album-art" alt="Cover">
                
                <div class="song-info">
                    <div class="song-title" id="current-title">Memuat...</div>
                    <div class="song-artist">DV Naga Persada</div>
                </div>

                <div class="progress-container" onclick="seekSong(event)">
                    <div class="progress-fill" id="progress-bar"></div>
                </div>

                <div class="controls">
                    <button class="btn-ctrl" onclick="prevSong()"><i class="fas fa-backward-step"></i></button>
                    <button class="btn-play" onclick="togglePlay()">
                        <i class="fas fa-play" id="play-icon"></i>
                    </button>
                    <button class="btn-ctrl" onclick="nextSong()"><i class="fas fa-forward-step"></i></button>
                </div>
            </div>

            <div class="playlist-section">
                <div class="playlist-header">
                    <span>PLAYLIST</span>
                    <i class="fas fa-list"></i>
                </div>
                <div id="playlist-box"></div>
            </div>
        </div>
    </div>

    <script>
        /* --- CONFIGURATION --- */
        const songs = [
            "1. Bukti Nyata", "2. Dari Ragu menjadi Maju", "3. Zero to Hero",
            "4. Dibawah Satu Komando", "5. Tim DV NP (Remix)", "6. Sang Leader",
            "7. DvNP joss (Remix)", "8. Keluarga Besar", "9. Kemenangan",
            "10. Pejuang Prestasi", "11. Maju Serentak", "12. Menang Asyik",
            "13. Peringkat", "14. Pesta Kemenangan", "15. Pintu Bahagia",
            "16. Satu Hati Satu Misi", "17. V.i.P"
        ];

        let index = 0;
        let isPlaying = false;
        const audio = document.getElementById('audio-player');
        const playIcon = document.getElementById('play-icon');
        const progressBar = document.getElementById('progress-bar');
        const welcomeScreen = document.getElementById('welcome-screen');
        const playerScreen = document.getElementById('player-screen');

        /* --- CORE LOGIC: UNLOCK AUDIO --- */
        // Fungsi ini dipanggil LANGSUNG saat tombol diklik (tanpa delay)
        function unlockAudioAndStart() {
            // 1. Load lagu pertama
            prepareSong(0); 
            
            // 2. PAKSA PLAY SEKARANG JUGA (Kunci anti blokir)
            // Ini memberi tahu browser: "User yang minta ini!"
            let playPromise = audio.play();

            if (playPromise !== undefined) {
                playPromise.then(_ => {
                    // Audio berhasil jalan
                    isPlaying = true;
                    playIcon.className = "fas fa-pause";
                    
                    // 3. Baru jalankan animasi ganti layar
                    transitionToPlayer();
                })
                .catch(error => {
                    console.log("Browser still blocked autoplay:", error);
                    // Jika masih gagal, paksa masuk layar player agar user bisa tekan play manual
                    transitionToPlayer(); 
                    alert("Silakan tekan tombol Play (Segitiga) untuk memutar musik.");
                });
            }
        }

        function transitionToPlayer() {
            welcomeScreen.style.opacity = '0';
            setTimeout(() => {
                welcomeScreen.style.display = 'none';
                playerScreen.style.display = 'flex';
                // Trigger reflow agar transisi opacity jalan
                void playerScreen.offsetWidth; 
                playerScreen.style.opacity = '1';
            }, 500);
        }

        /* --- PLAYER FUNCTIONS --- */
        function prepareSong(i) {
            index = i;
            // Bersihkan nama file
            let rawTitle = songs[index];
            let cleanTitle = rawTitle.substring(rawTitle.indexOf(" ") + 1);
            
            document.getElementById('current-title').innerText = cleanTitle;
            
            // Set source
            audio.src = `mp3/${index + 1}.mp3`;
            
            renderPlaylist();
        }

        function togglePlay() {
            if (audio.paused) {
                audio.play();
                isPlaying = true;
                playIcon.className = "fas fa-pause";
            } else {
                audio.pause();
                isPlaying = false;
                playIcon.className = "fas fa-play";
            }
            renderPlaylist(); // Update icon di list
        }

        function nextSong() {
            index = (index + 1) % songs.length;
            changeSong(index);
        }

        function prevSong() {
            index = (index - 1 + songs.length) % songs.length;
            changeSong(index);
        }

        function changeSong(i) {
            prepareSong(i);
            audio.play(); // Auto play saat ganti lagu
            isPlaying = true;
            playIcon.className = "fas fa-pause";
        }

        /* --- UI RENDER --- */
        function renderPlaylist() {
            const box = document.getElementById('playlist-box');
            box.innerHTML = "";
            songs.forEach((song, i) => {
                let div = document.createElement('div');
                div.className = `track-item ${i === index ? 'active' : ''}`;
                // Klik lagu di list langsung main
                div.onclick = () => { changeSong(i); };
                
                let cleanTitle = song.substring(song.indexOf(" ") + 1);

                div.innerHTML = `
                    <div class="track-num">${i + 1}</div>
                    <div class="track-name">${cleanTitle}</div>
                    <div class="track-icon"><i class="fas fa-volume-high"></i></div>
                `;
                box.appendChild(div);
            });
        }

        /* --- EVENTS --- */
        // Update Progress Bar
        audio.addEventListener('timeupdate', () => {
            if (audio.duration) {
                const percent = (audio.currentTime / audio.duration) * 100;
                progressBar.style.width = `${percent}%`;
            }
        });

        // Auto Next saat lagu habis
        audio.addEventListener('ended', nextSong);

        // Geser Lagu (Seek)
        function seekSong(e) {
            const width = e.target.closest('.progress-container').clientWidth;
            // Ambil posisi klik relatif terhadap elemen progress
            const rect = e.target.closest('.progress-container').getBoundingClientRect();
            const clickX = e.clientX - rect.left; 
            
            const duration = audio.duration;
            audio.currentTime = (clickX / width) * duration;
        }

        // Jalankan render awal
        renderPlaylist();

    </script>
</body>
</html>
