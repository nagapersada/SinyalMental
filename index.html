<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DV Naga Persada Player</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root { --gold: #FFD700; --dark: #0f0f0f; --glass: rgba(20, 20, 20, 0.9); }
        * { box-sizing: border-box; margin: 0; padding: 0; user-select: none; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Poppins', sans-serif; background-color: var(--dark); color: white; height: 100vh; overflow: hidden; display: flex; align-items: center; justify-content: center; }

        .bg-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('1000185027.jpg'); 
            background-size: cover; background-position: center;
            filter: blur(8px) brightness(0.4); transform: scale(1.1); z-index: -1;
        }

        /* DEBUG BOX (Kotak Merah Pengecek Error) */
        #debug-console {
            position: fixed; top: 0; left: 0; width: 100%;
            background: rgba(255, 0, 0, 0.9); color: white;
            padding: 10px; font-size: 12px; z-index: 9999;
            display: none; text-align: left;
        }

        #app-container { width: 100%; height: 100%; position: relative; display: flex; flex-direction: column; overflow: hidden; }

        /* WELCOME SCREEN */
        #welcome-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); z-index: 99;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: opacity 0.5s ease;
        }
        .btn-start {
            margin-top: 30px; padding: 15px 50px; border-radius: 50px; border: none;
            background: var(--gold); color: black; font-weight: bold; font-size: 1.2rem;
            cursor: pointer; box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);
        }

        /* PLAYER SCREEN */
        #player-screen { display: none; width: 100%; height: 100%; flex-direction: column; opacity: 0; transition: opacity 1s ease; }
        .top-section { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; position: relative; }
        .album-art { width: 200px; height: 200px; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.5); border: 2px solid var(--gold); object-fit: cover; margin-bottom: 20px; }
        .song-title { font-size: 1.3rem; font-weight: 700; color: var(--gold); margin-bottom: 5px; text-align: center; }
        
        .progress-container { width: 80%; height: 6px; background: rgba(255,255,255,0.2); border-radius: 5px; margin-bottom: 25px; cursor: pointer; }
        .progress-fill { height: 100%; background: var(--gold); width: 0%; border-radius: 5px; }

        .controls { display: flex; align-items: center; gap: 30px; }
        .btn-ctrl { background: none; border: none; color: white; font-size: 1.8rem; cursor: pointer; }
        .btn-play { width: 70px; height: 70px; background: var(--gold); border-radius: 50%; color: black; font-size: 2rem; display: flex; align-items: center; justify-content: center; }

        .playlist-section { height: 40%; background: var(--glass); border-top-left-radius: 30px; border-top-right-radius: 30px; padding: 20px; overflow-y: auto; }
        .track-item { padding: 15px; border-bottom: 1px solid rgba(255,255,255,0.1); display: flex; align-items: center; cursor: pointer; }
        .track-item.active { color: var(--gold); font-weight: bold; }
        .track-num { width: 30px; }

        /* LANDSCAPE FIX */
        @media (orientation: landscape) {
            #player-screen { flex-direction: row; }
            .top-section { width: 50%; height: 100%; justify-content: center; padding: 10px; }
            .album-art { width: 120px; height: 120px; margin-bottom: 10px; }
            .playlist-section { width: 50%; height: 100%; border-radius: 0; border-left: 1px solid white; }
        }
    </style>
</head>
<body>

    <div class="bg-layer"></div>
    <div id="debug-console"></div> <audio id="audio-player" preload="auto"></audio>

    <div id="app-container">
        <div id="welcome-screen">
            <img src="logo.png" style="width:120px; margin-bottom:20px;">
            <h2 style="color:var(--gold)">NAGA PERSADA</h2>
            <button class="btn-start" onclick="unlockAudio()">PUTAR MUSIK</button>
            <p style="margin-top:20px; font-size:10px; color:#666;">v4.0 Debug Mode</p>
        </div>

        <div id="player-screen">
            <div class="top-section">
                <img src="1000185022.jpg" class="album-art" alt="Cover">
                <div class="song-title" id="current-title">Memuat...</div>
                
                <div class="progress-container" onclick="seek(event)">
                    <div class="progress-fill" id="progress-bar"></div>
                </div>

                <div class="controls">
                    <button class="btn-ctrl" onclick="prev()"><i class="fas fa-step-backward"></i></button>
                    <button class="btn-play" onclick="togglePlay()"><i class="fas fa-play" id="play-icon"></i></button>
                    <button class="btn-ctrl" onclick="next()"><i class="fas fa-step-forward"></i></button>
                </div>
            </div>

            <div class="playlist-section" id="playlist-box"></div>
        </div>
    </div>

    <script>
        const songs = [
            "1. Bukti Nyata", "2. Dari Ragu menjadi Maju", "3. Zero to Hero",
            "4. Dibawah Satu Komando", "5. Tim DV NP (Remix)", "6. Sang Leader",
            "7. DvNP joss (Remix)", "8. Keluarga Besar", "9. Kemenangan",
            "10. Pejuang Prestasi", "11. Maju Serentak", "12. Menang Asyik",
            "13. Peringkat", "14. Pesta Kemenangan", "15. Pintu Bahagia",
            "16. Satu Hati Satu Misi", "17. V.i.P"
        ];

        let index = 0;
        const audio = document.getElementById('audio-player');
        const debugBox = document.getElementById('debug-console');
        
        // FUNGSI LOG ERROR KE LAYAR
        function logError(msg) {
            debugBox.style.display = 'block';
            debugBox.innerHTML = "⚠️ <b>ERROR TERDETEKSI:</b><br>" + msg;
            console.error(msg);
        }

        // Cek Error Audio Langsung
        audio.addEventListener('error', (e) => {
            let errorSrc = audio.src;
            let code = audio.error ? audio.error.code : 'Unknown';
            let msg = "";

            if (code === 4) {
                msg = `File tidak ditemukan (Error 404).<br>Sistem mencari file di: <br><u>${errorSrc}</u><br><br><b>SOLUSI:</b><br>1. Pastikan folder bernama 'mp3' (huruf kecil).<br>2. Pastikan nama file '1.mp3' (angka & huruf kecil).<br>3. File .MP3 (huruf besar) tidak bisa dibaca.`;
            } else {
                msg = `Error Code: ${code}. Format audio mungkin tidak didukung atau korup.`;
            }
            logError(msg);
        });

        function unlockAudio() {
            loadSong(0);
            
            // Paksa Play
            var playPromise = audio.play();
            if (playPromise !== undefined) {
                playPromise.then(_ => {
                    // Audio jalan
                    showPlayer();
                })
                .catch(error => {
                    // Masih diblokir browser, tapi kita paksa masuk player
                    showPlayer();
                    alert("Klik tombol Play Segitiga untuk memutar manual.");
                });
            }
        }

        function showPlayer() {
            document.getElementById('welcome-screen').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('welcome-screen').style.display = 'none';
                document.getElementById('player-screen').style.display = 'flex';
                document.getElementById('player-screen').style.opacity = '1';
            }, 500);
        }

        function loadSong(i) {
            index = i;
            // Tampilan Judul
            let raw = songs[index];
            document.getElementById('current-title').innerText = raw.substring(raw.indexOf(" ")+1);
            
            // Set File - INI KUNCI PENTING
            // File harus di folder 'mp3' dan nama '1.mp3', '2.mp3', dst.
            let fileName = `mp3/${index + 1}.mp3`;
            audio.src = fileName;
            
            renderList();
        }

        function togglePlay() {
            if (audio.paused) {
                audio.play();
                document.getElementById('play-icon').className = "fas fa-pause";
            } else {
                audio.pause();
                document.getElementById('play-icon').className = "fas fa-play";
            }
        }

        function next() {
            index = (index + 1) % songs.length;
            loadSong(index);
            audio.play();
            document.getElementById('play-icon').className = "fas fa-pause";
        }

        function prev() {
            index = (index - 1 + songs.length) % songs.length;
            loadSong(index);
            audio.play();
            document.getElementById('play-icon').className = "fas fa-pause";
        }

        function renderList() {
            const box = document.getElementById('playlist-box');
            box.innerHTML = "";
            songs.forEach((s, i) => {
                let div = document.createElement('div');
                div.className = `track-item ${i === index ? 'active' : ''}`;
                div.onclick = () => { loadSong(i); audio.play(); document.getElementById('play-icon').className = "fas fa-pause"; };
                div.innerHTML = `<div class="track-num">${i+1}</div><div>${s.substring(s.indexOf(" ")+1)}</div>`;
                box.appendChild(div);
            });
        }
        
        // Progress Bar Jalan
        audio.addEventListener('timeupdate', () => {
            if(audio.duration) {
                document.getElementById('progress-bar').style.width = (audio.currentTime/audio.duration)*100 + "%";
            }
        });

        // Seek
        function seek(e) {
            const w = e.target.closest('.progress-container').clientWidth;
            const x = e.offsetX;
            audio.currentTime = (x/w) * audio.duration;
        }

        // Auto next
        audio.addEventListener('ended', next);

    </script>
</body>
</html>
