<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#000000">
    <title>Naga Persada Music</title>
    
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="logo.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* --- RESET & BASIC SETUP --- */
        * { box-sizing: border-box; margin: 0; padding: 0; user-select: none; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #050505;
            color: white;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* --- BACKGROUND --- */
        .bg-fixed {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: url('1000185027.jpg') no-repeat center center;
            background-size: cover; z-index: -2;
        }
        .bg-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to top, #000000 10%, rgba(0,0,0,0.8) 50%, rgba(0,0,0,0.6) 100%);
            backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
            z-index: -1;
        }

        /* --- INTRO SCREEN --- */
        #page-intro {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.92); z-index: 1000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: opacity 0.6s ease;
        }
        
        .intro-btn {
            margin-top: 40px; padding: 16px 50px;
            background: linear-gradient(135deg, #BF953F, #FCF6BA, #B38728);
            border: none; border-radius: 50px;
            color: #222; font-weight: 700; font-size: 1rem; letter-spacing: 1px;
            cursor: pointer; box-shadow: 0 0 30px rgba(191, 149, 63, 0.4);
            animation: pulse-gold 2s infinite;
        }
        .intro-btn:active { transform: scale(0.95); }

        /* --- PLAYER SCREEN --- */
        #page-player {
            display: none; width: 100%; height: 100%;
            flex-direction: column; 
            opacity: 0; transition: opacity 1s;
        }

        /* --- LAYOUT PORTRAIT (HP BERDIRI) --- */
        
        /* 1. Bagian Atas (Cover & Judul) */
        .top-section {
            flex: 2; /* Mengambil porsi layar paling besar */
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            width: 100%; padding: 10px 20px;
            min-height: 0; /* Mencegah overflow */
        }

        .cover-wrapper {
            /* Responsif: Maksimal 280px, atau 35% tinggi layar */
            width: 35vh; height: 35vh; 
            max-width: 280px; max-height: 280px;
            margin-bottom: 20px; position: relative;
            flex-shrink: 0;
        }
        
        .cover-img {
            width: 100%; height: 100%; 
            border-radius: 20px; 
            object-fit: cover;
            /* FIX PENTING: Fokus gambar ke ATAS (Wajah) agar tidak kepotong */
            object-position: top; 
            box-shadow: 0 15px 40px rgba(0,0,0,0.6);
            border: 2px solid rgba(191, 149, 63, 0.3);
        }

        .song-info { text-align: center; width: 100%; }
        .song-title {
            font-size: 1.5rem; font-weight: 700;
            background: linear-gradient(to bottom, #fff, #ddd);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            margin-bottom: 5px; 
            white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
            padding: 0 10px;
        }
        .song-artist { font-size: 0.9rem; color: #BF953F; letter-spacing: 1px; }

        /* 2. Bagian Kontrol (Seeker & Tombol) */
        .controls-section {
            flex: 0 0 auto; /* Tinggi menyesuaikan isi, tidak melar */
            width: 100%; padding: 0 30px 20px 30px;
            display: flex; flex-direction: column; justify-content: center;
        }

        .prog-cont { width: 100%; margin-bottom: 20px; display: flex; align-items: center; position: relative; height: 20px;}
        .prog-bg {
            width: 100%; height: 4px; background: rgba(255,255,255,0.2);
            border-radius: 10px; position: relative;
        }
        .prog-fill {
            height: 100%; background: #BF953F; border-radius: 10px; width: 0%;
            position: relative;
        }
        /* Pentol Slider */
        .prog-fill::after {
            content: ''; position: absolute; right: -6px; top: -4px;
            width: 12px; height: 12px; background: #fff; border-radius: 50%;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }
        .seek-input { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            opacity: 0; cursor: pointer; z-index: 5;
        }

        .buttons-row { display: flex; align-items: center; justify-content: center; gap: 30px; }
        .btn-act { background: none; border: none; color: white; font-size: 1.8rem; cursor: pointer; padding: 10px;}
        
        .btn-play-circle {
            width: 70px; height: 70px;
            background: linear-gradient(135deg, #BF953F, #FBF5B7);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            color: #222; font-size: 2rem;
            box-shadow: 0 10px 20px rgba(191, 149, 63, 0.3);
            transition: transform 0.1s;
        }
        .btn-play-circle:active { transform: scale(0.95); }

        /* 3. Bagian Playlist (Bawah) */
        .playlist-section {
            flex: 1.5; /* Mengambil sisa ruang bawah */
            background: rgba(20, 20, 20, 0.85);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border-top-left-radius: 25px; border-top-right-radius: 25px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 15px 20px; 
            overflow-y: auto; /* Bisa discroll */
            display: flex; flex-direction: column;
        }
        
        .playlist-header { 
            font-size: 0.8rem; color: #888; text-transform: uppercase; 
            letter-spacing: 1px; margin-bottom: 10px; padding-left: 5px;
            position: sticky; top: 0;
        }

        .track { 
            display: flex; align-items: center; padding: 12px; 
            border-radius: 12px; margin-bottom: 4px; 
            transition: background 0.2s; cursor: pointer; 
        }
        .track:active { background: rgba(255,255,255,0.1); }
        .track.active { 
            background: linear-gradient(90deg, rgba(191, 149, 63, 0.2), transparent); 
            border-left: 3px solid #BF953F; 
        }
        
        .track-num { width: 30px; color: #666; font-size: 0.9rem; font-weight: 600; }
        .track.active .track-num { color: #BF953F; }
        .t-title { font-size: 0.95rem; color: #eee; flex: 1; font-weight: 400; }
        .track.active .t-title { color: #BF953F; font-weight: 600; }
        .playing-icon { font-size: 0.8rem; color: #BF953F; display: none; }
        .track.active .playing-icon { display: block; animation: beat 1s infinite; }

        /* --- ANIMASI --- */
        @keyframes pulse-gold { 0% { box-shadow: 0 0 0 0 rgba(191, 149, 63, 0.7); } 70% { box-shadow: 0 0 0 15px rgba(191, 149, 63, 0); } 100% { box-shadow: 0 0 0 0 rgba(191, 149, 63, 0); } }
        @keyframes beat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.3); } }

        /* --- LAYOUT LANDSCAPE (HP MIRING) --- */
        @media (orientation: landscape) {
            #page-player { flex-direction: row; }
            
            /* Kiri: Player Area */
            .landscape-left {
                width: 45%; height: 100%;
                display: flex; flex-direction: column;
                align-items: center; justify-content: center;
                padding: 10px;
                border-right: 1px solid rgba(255,255,255,0.1);
            }

            .top-section { flex: unset; height: auto; padding: 0; margin-bottom: 10px; }
            .cover-wrapper { width: 120px; height: 120px; margin-bottom: 10px; }
            .song-title { font-size: 1.1rem; }
            .song-artist { font-size: 0.8rem; }
            
            .controls-section { padding: 0 20px; }
            .btn-play-circle { width: 55px; height: 55px; font-size: 1.5rem; }
            .btn-act { font-size: 1.4rem; }

            /* Kanan: Playlist Area */
            .playlist-section {
                width: 55%; height: 100%;
                border-radius: 0; flex: 1;
                padding: 15px;
            }
        }

        /* Helper untuk memindahkan elemen saat landscape */
        @media (orientation: portrait) {
            .landscape-left { contents: initial; } /* Reset di portrait */
        }
    </style>
</head>
<body>

    <div class="bg-fixed"></div>
    <div class="bg-overlay"></div>
    <audio id="audio-core" preload="auto"></audio>

    <div id="page-intro">
        <img src="logo.png" style="width:150px; margin-bottom:20px; filter: drop-shadow(0 0 10px rgba(0,0,0,0.5));">
        <h2 style="color:#BF953F; font-weight:300; letter-spacing:2px; font-size:1.1rem;">TIM DV NAGA PERSADA</h2>
        <h1 style="color:white; font-size:1.8rem; font-weight:700;">Sinyal Mental Joss</h1>
        <button class="intro-btn" onclick="startApp()">PUTAR & FULLSCREEN <i class="fas fa-expand" style="margin-left:8px"></i></button>
    </div>

    <div id="page-player">
        
        <div class="landscape-left">
            <div class="top-section">
                <div class="cover-wrapper">
                    <img src="1000185022.jpg" class="cover-img">
                </div>
                <div class="song-info">
                    <div class="song-title" id="txt-title">Memuat...</div>
                    <div class="song-artist">DV Naga Persada Collection</div>
                </div>
            </div>

            <div class="controls-section">
                <div class="prog-cont">
                    <div class="prog-bg">
                        <div class="prog-fill" id="fill-bar"></div>
                    </div>
                    <input type="range" class="seek-input" id="seeker" min="0" max="100" value="0" oninput="seekAudio()">
                </div>
                
                <div class="buttons-row">
                    <button class="btn-act" onclick="changeSong(-1)"><i class="fas fa-backward-step"></i></button>
                    <button class="btn-play-circle" onclick="playPause()">
                        <i class="fas fa-play" id="icon-play" style="margin-left:4px;"></i>
                    </button>
                    <button class="btn-act" onclick="changeSong(1)"><i class="fas fa-forward-step"></i></button>
                </div>
            </div>
        </div>

        <div class="playlist-section">
            <div class="playlist-header">Daftar Lagu</div>
            <div id="list-box"></div>
        </div>
    </div>

    <script>
        // PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => { navigator.serviceWorker.register('./sw.js'); });
        }

        // FULLSCREEN
        function openFullscreen() {
            var elem = document.documentElement;
            if (elem.requestFullscreen) { elem.requestFullscreen(); }
            else if (elem.webkitRequestFullscreen) { elem.webkitRequestFullscreen(); }
        }

        // DATA & LOGIC
        const songTitles = [
            "Bukti Nyata", "Dari Ragu menjadi Maju", "Zero to Hero",
            "Dibawah Satu Komando", "Tim DV NP (Remix)", "Sang Leader",
            "DvNP joss (Remix)", "Keluarga Besar", "Kemenangan",
            "Pejuang Prestasi", "Maju Serentak", "Menang Asyik",
            "Peringkat", "Pesta Kemenangan", "Pintu Bahagia",
            "Satu Hati Satu Misi", "V.i.P"
        ];

        let currentIndex = 0;
        const audio = document.getElementById('audio-core');
        const playIcon = document.getElementById('icon-play');
        const fillBar = document.getElementById('fill-bar');
        const seeker = document.getElementById('seeker');

        function startApp() {
            openFullscreen();
            document.getElementById('page-intro').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('page-intro').style.display = 'none';
                document.getElementById('page-player').style.display = 'flex';
                setTimeout(() => document.getElementById('page-player').style.opacity = '1', 50);
            }, 600);
            loadAndPlay(0);
        }

        function loadAndPlay(index) {
            if (index < 0) index = songTitles.length - 1;
            if (index >= songTitles.length) index = 0;
            currentIndex = index;
            document.getElementById('txt-title').innerText = songTitles[currentIndex];
            
            // Path Audio
            audio.src = `./mp3/${currentIndex + 1}.mp3`;
            
            audio.play().then(() => {
                playIcon.className = "fas fa-pause";
                renderPlaylist();
            }).catch(e => console.log("Menunggu interaksi user"));
            renderPlaylist();
        }

        function playPause() {
            if (audio.paused) {
                audio.play();
                playIcon.className = "fas fa-pause";
            } else {
                audio.pause();
                playIcon.className = "fas fa-play";
            }
        }

        function changeSong(dir) { loadAndPlay(currentIndex + dir); }

        function renderPlaylist() {
            const box = document.getElementById('list-box');
            box.innerHTML = "";
            songTitles.forEach((title, i) => {
                let div = document.createElement('div');
                div.className = `track ${i === currentIndex ? 'active' : ''}`;
                div.onclick = () => loadAndPlay(i);
                div.innerHTML = `
                    <div class="track-num">${i+1}</div>
                    <div class="t-title">${title}</div>
                    <i class="fas fa-music playing-icon"></i>
                `;
                box.appendChild(div);
            });
            
            // Auto scroll ke lagu yang aktif
            setTimeout(() => {
                const activeTrack = document.querySelector('.track.active');
                if(activeTrack) activeTrack.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 100);
        }

        audio.addEventListener('timeupdate', () => {
            if(audio.duration) {
                let pct = (audio.currentTime / audio.duration) * 100;
                fillBar.style.width = pct + "%";
                seeker.value = pct;
            }
        });

        function seekAudio() { 
            audio.currentTime = (seeker.value / 100) * audio.duration; 
        }
        
        audio.addEventListener('ended', () => changeSong(1));
    </script>
</body>
</html>
